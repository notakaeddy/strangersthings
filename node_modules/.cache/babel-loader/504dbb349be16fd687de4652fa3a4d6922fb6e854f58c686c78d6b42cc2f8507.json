{"ast":null,"code":"var _jsxFileName = \"/Users/edgar_main/Documents/StrangersThings/src/Components/PostList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getPosts, deletePost } from \"../API\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PostList = () => {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [filterPosts, setFilterPosts] = useState([]);\n  const [filterVal, setFilterVal] = useState(\"\");\n  const navigate = useNavigate();\n  const handleUpdate = post => {\n    console.log(\"UPDATED\");\n    navigate(\"/postform\", {\n      state: {\n        post: post,\n        updateStatus: true\n      }\n    });\n  };\n  const handleDelete = async id => {\n    await deletePost(id);\n    const posts = await getPosts();\n    setPosts(posts.data.posts);\n    console.log(\"DELETED\");\n  };\n  const handleCreate = () => {\n    navigate(\"/postform\");\n  };\n  useEffect(() => {\n    async function fetchData() {\n      const posts = await getPosts();\n      setPosts(posts.data.posts);\n      setFilterPosts(posts.data.posts);\n    }\n    fetchData();\n  }, []);\n  useEffect(() => {\n    if (filterVal.trim().length === 0) {\n      setFilterPosts(posts);\n    } else if (filterVal.trim().length > 0) {\n      const newPosts = posts.filter(post => {\n        console.log(\"post: \", post.title);\n        console.log(\"filter val: \", filterVal);\n        console.log(\"contains: \", post.title.includes(filterVal));\n        return post.title.trim().toLowerCase().includes(filterVal.trim().toLowerCase());\n      });\n      console.log(\"filter post: \", newPosts);\n      setFilterPosts(newPosts);\n    }\n  }, [filterVal, posts]);\n  const isLoggedIn = localStorage.getItem(\"token\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"PostsContainer\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Search\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        value: filterVal,\n        type: \"text\",\n        placeholder: \"Search...\",\n        onChange: e => setFilterVal(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), isLoggedIn && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleCreate(),\n        children: \"Add a New Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this), filterPosts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Posts\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Posted By: \", post.author.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Item Description:\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 32\n        }, this), post.description]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Asking Price: \", post.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Location: \", post.location]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), post.willDeliver === false || null ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Will NOT Deliver\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Will Deliver\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this), post.isAuthor && isLoggedIn && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleUpdate(post),\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(post._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this)]\n    }, post._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(PostList, \"hzywabE6rh9exa4eCZXRhOV/LLc=\", false, function () {\n  return [useNavigate];\n});\n_c = PostList;\nexport default PostList;\nvar _c;\n$RefreshReg$(_c, \"PostList\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","getPosts","deletePost","PostList","posts","setPosts","filterPosts","setFilterPosts","filterVal","setFilterVal","navigate","handleUpdate","post","console","log","state","updateStatus","handleDelete","id","data","handleCreate","fetchData","trim","length","newPosts","filter","title","includes","toLowerCase","isLoggedIn","localStorage","getItem","e","target","value","map","author","username","description","price","location","willDeliver","isAuthor","_id"],"sources":["/Users/edgar_main/Documents/StrangersThings/src/Components/PostList.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getPosts, deletePost } from \"../API\";\nconst PostList = () => {\n  const [posts, setPosts] = useState([]);\n  const [filterPosts, setFilterPosts] = useState([]);\n  const [filterVal, setFilterVal] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleUpdate = (post) => {\n    console.log(\"UPDATED\");\n    navigate(\"/postform\", { state: { post: post, updateStatus: true } });\n  };\n\n  const handleDelete = async (id) => {\n    await deletePost(id);\n    const posts = await getPosts();\n    setPosts(posts.data.posts);\n    console.log(\"DELETED\");\n  };\n\n  const handleCreate = () => {\n    navigate(\"/postform\");\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      const posts = await getPosts();\n      setPosts(posts.data.posts);\n      setFilterPosts(posts.data.posts);\n    }\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (filterVal.trim().length === 0) {\n      setFilterPosts(posts);\n    } else if (filterVal.trim().length > 0) {\n      const newPosts = posts.filter((post) => {\n        console.log(\"post: \", post.title);\n        console.log(\"filter val: \", filterVal);\n        console.log(\"contains: \", post.title.includes(filterVal));\n        return post.title\n          .trim()\n          .toLowerCase()\n          .includes(filterVal.trim().toLowerCase());\n      });\n      console.log(\"filter post: \", newPosts);\n      setFilterPosts(newPosts);\n    }\n  }, [filterVal, posts]);\n\n  const isLoggedIn = localStorage.getItem(\"token\");\n  return (\n    <div className=\"PostsContainer\">\n      {/* <h1></h1> */}\n      <div className=\"Search\">\n        <input\n          value={filterVal}\n          type=\"text\"\n          placeholder=\"Search...\"\n          onChange={(e) => setFilterVal(e.target.value)}\n        />\n      </div>\n      {isLoggedIn && (\n        <div>\n          <button onClick={() => handleCreate()}>Add a New Post</button>\n        </div>\n      )}\n      {filterPosts.map((post) => (\n        <div className=\"Posts\" key={post._id}>\n          <h2>{post.title}</h2>\n          <p>Posted By: {post.author.username}</p>\n          <h3>Item Description:<br/>{post.description}</h3>\n          <h4>Asking Price: {post.price}</h4>\n          <p>Location: {post.location}</p>\n          {post.willDeliver === false || null ? (\n            <p>{\"Will NOT Deliver\"}</p>\n          ) : (\n            <p>{\"Will Deliver\"}</p>\n          )}\n          {post.isAuthor && isLoggedIn && (\n            <>\n              <button onClick={() => handleUpdate(post)}>Update</button>\n              <button onClick={() => handleDelete(post._id)}>Delete</button>\n            </>\n          )}\n          <br/>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default PostList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}